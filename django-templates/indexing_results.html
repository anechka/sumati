{% extends "base.html" %}

{% block content %}

  {% if not incomplete %}
    <h1>Search indexing results</h1>
    <div class="well">
      <p class="lead">Processed {{ processed }} files</p>
    </div>
  {% else %}
    {% if incomplete.failed %}
      <h1>Error running search indexing</h1>
      <div class="alert alert-danger">
        {{ incomplete.result }}
      </div>
    {% else %}
      <div id="progress" class="text-center">
        <p class="lead">Processed {{ processed }} filesâ€¦</p>
        <div class="progress progress-striped active">
          <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
            <span class="sr-only">100% Complete</span>
          </div>
        </div>
      </div>
      <script type="text/javascript">
        setTimeout(function(){ location.reload() }, 2000);
      </script>
    {% endif %}
  {% endif %}

{% endblock %}
